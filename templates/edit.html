{% extends 'base.html' %}
{% block content %}

<h2>Chỉnh sửa bài viết</h2>

<form method="POST" enctype="multipart/form-data" onsubmit="saveContent()">
    <div class="mb-2">
        <input type="text" name="title" class="form-control" placeholder="Tiêu đề" value="{{ post.title }}" required>
    </div>

    <div class="mb-2">
        <label>Chọn danh mục:</label>
        <select name="category_id" class="form-select">
            {% for cat in categories %}
            <option value="{{ cat.id }}" {% if cat.id == post.category_id %}selected{% endif %}>{{ cat.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div id="editor" style="height:300px;">{{ post.content|safe }}</div>
    <input type="hidden" name="content" id="content">

    <button type="submit" class="btn btn-primary mt-2">Cập nhật bài viết</button>
</form>

<script>
var quill = new Quill('#editor', { theme: 'snow' });

function saveContent() {
    document.getElementById('content').value = quill.root.innerHTML;
}
</script>

{% endblock %}
